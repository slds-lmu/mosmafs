<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create ecr Objective Function — makeObjective • mosmafs</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Create ecr Objective Function — makeObjective" />
<meta property="og:description" content="Creates an objective function that resamples learner on task
with resampling and measures measure (optional), together
with the number of features selected.
If measure needs to be maximized, it is multiplied by -1 to make it
a minimization task.
The ParamSet used to generate individuals for the ecr must include
parameters for learner, not a logical parameter with length equal
to getTaskNFeats(task) for feature selection, as it is automatically added
named as selector.selection.
It can be accessed via getParamSet() with the object created by
makeObjective() as input.
learner must not include a cpoSelector() applied to it, this
happens automatically within makeObjective." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mosmafs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Github Version">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/demo.html">Introduction to MOSMaFS</a>
    </li>
    <li>
      <a href="../articles/multifidelity.html">Multi-Fidelity MOSMaFS</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/compstat-lmu/mosmafs/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create ecr Objective Function</h1>
    <small class="dont-index">Source: <a href='https://github.com/compstat-lmu/mosmafs/blob/master/R/objective.R'><code>R/objective.R</code></a></small>
    <div class="hidden name"><code>makeObjective.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Creates an objective function that resamples <code>learner</code> on <code>task</code>
with <code>resampling</code> and measures <code>measure</code> (optional), together
with the number of features selected.
If measure needs to be maximized, it is multiplied by -1 to make it
a minimization task.</p>
<p>The <code>ParamSet</code> used to generate individuals for the ecr must include
parameters for <code>learner</code>, not a <code>logical</code> parameter with length equal
to <code>getTaskNFeats(task)</code> for feature selection, as it is automatically added
named as <code>selector.selection</code>.
It can be accessed via <code>getParamSet()</code> with the object created by
<code>makeObjective()</code> as input.</p>
<p><code>learner</code> must <em>not</em> include a <code><a href='cpoSelector.html'>cpoSelector()</a></code> applied to it, this
happens automatically within <code>makeObjective</code>.</p>
    </div>

    <pre class="usage"><span class='fu'>makeObjective</span>(
  <span class='no'>learner</span>,
  <span class='no'>task</span>,
  <span class='no'>ps</span>,
  <span class='no'>resampling</span>,
  <span class='kw'>measure</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>holdout.data</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>worst.measure</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>cpo</span> <span class='kw'>=</span> <span class='no'>NULLCPO</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>learner</th>
      <td><p><code>[Learner]</code> A <code><a href='https://mlr.mlr-org.com/reference/makeLearner.html'>Learner</a></code> object to optimize.</p></td>
    </tr>
    <tr>
      <th>task</th>
      <td><p><code>[Task]</code> The <code><a href='https://mlr.mlr-org.com/reference/Task.html'>mlr::Task</a></code> object to optimize on.</p></td>
    </tr>
    <tr>
      <th>ps</th>
      <td><p><code>[ParamSet]</code> The <code><a href='https://paramhelpers.mlr-org.com/reference/makeParamSet.html'>ParamSet</a></code> to optimize over, only parameters of the
actual learner.</p></td>
    </tr>
    <tr>
      <th>resampling</th>
      <td><p><code>[ResampleDesc | ResampleInst | function]</code> The <code><a href='https://mlr.mlr-org.com/reference/makeResampleDesc.html'>ResampleDesc</a></code> or
<code><a href='https://mlr.mlr-org.com/reference/makeResampleInstance.html'>ResampleInst</a></code> object to use. This may be a function
<code><a href='https://rdrr.io/r/base/numeric.html'>numeric(1)</a></code> -&gt; <code>ResampleDesc</code>/<code>ResampleInst</code> which maps fidelity to the resampling to use.
If this is used, then the resampling should be chosen such that an average value, weighted by fidelity,
makes sense. For example, the function could map an integer to a corresponding number of resampling folds
or repetitions.</p></td>
    </tr>
    <tr>
      <th>measure</th>
      <td><p><code>[Measure | NULL]</code> The <code><a href='https://mlr.mlr-org.com/reference/makeMeasure.html'>Measure</a></code> to optimize for.
The default is <code>NULL</code>, which uses the <code>task</code>'s default <code>Measure</code>.
If measure needs to be maximized, the measure is multiplied
by -1, to make it a minimization task.</p></td>
    </tr>
    <tr>
      <th>holdout.data</th>
      <td><p><code>[Task]</code> Additional data on which to predict each
configuration after training on <code>task</code>.</p></td>
    </tr>
    <tr>
      <th>worst.measure</th>
      <td><p><code>[numeric(1)]</code> worst value for measure to consider,
for dominated hypervolume calculation. Will be extracted from the
given measure if not given, but will raise an error if the extracted
(or given) value is infinite. Measure is multiplied by -1, if measure needs
to be maximized.</p></td>
    </tr>
    <tr>
      <th>cpo</th>
      <td><p><code>[CPO]</code> CPO pipeline to apply before feature selection.
(A CPO that should be applied <em>after</em> feature selection should already be
part of <code>learner</code> when given). Care should be taken that the
<code>selector.selection</code> parameter in <code>ps</code> has the appropriate length of
the data that <code>cpo</code> emits.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>function</code> an objective function for <code><a href='https://rdrr.io/pkg/ecr/man/ecr.html'>ecr::ecr</a></code>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='st'>"mlr"</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='st'>"rpart"</span>)

<span class='no'>task.whole</span> <span class='kw'>&lt;-</span> <span class='no'>bh.task</span>
<span class='no'>rows.whole</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span>(<span class='fu'><a href='https://mlr.mlr-org.com/reference/getTaskData.html'>getTaskData</a></span>(<span class='no'>task.whole</span>)))
<span class='no'>task</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://mlr.mlr-org.com/reference/subsetTask.html'>subsetTask</a></span>(<span class='no'>task.whole</span>, <span class='no'>rows.whole</span>[<span class='fl'>1</span>:<span class='fl'>250</span>])
<span class='no'>task.hout</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://mlr.mlr-org.com/reference/subsetTask.html'>subsetTask</a></span>(<span class='no'>task.whole</span>, <span class='no'>rows.whole</span>[<span class='fl'>251</span>])
<span class='no'>lrn</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://mlr.mlr-org.com/reference/makeLearner.html'>makeLearner</a></span>(<span class='st'>"regr.rpart"</span>)

<span class='no'>ps.simple</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>mlrCPO</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/mlrCPO/man/pSS.html'>pSS</a></span>(
  <span class='no'>maxdepth</span>: <span class='no'>integer</span>[<span class='fl'>1</span>, <span class='fl'>30</span>],
  <span class='no'>minsplit</span>: <span class='no'>integer</span>[<span class='fl'>2</span>, <span class='fl'>30</span>],
  <span class='no'>cp</span>: <span class='no'>numeric</span>[<span class='fl'>0.001</span>, <span class='fl'>0.999</span>])
  <span class='no'>nRes</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>n</span>) {
  <span class='fu'><a href='https://mlr.mlr-org.com/reference/makeResampleDesc.html'>makeResampleDesc</a></span>(<span class='st'>"Subsample"</span>, <span class='kw'>split</span> <span class='kw'>=</span> <span class='fl'>0.9</span>, <span class='kw'>iters</span> <span class='kw'>=</span> <span class='no'>n</span>)
}

<span class='no'>fitness.fun.mos</span> <span class='kw'>&lt;-</span> <span class='fu'>makeObjective</span>(<span class='no'>lrn</span>, <span class='no'>task</span>, <span class='no'>ps.simple</span>, <span class='no'>nRes</span>,
  <span class='kw'>measure</span> <span class='kw'>=</span> <span class='no'>mse</span>,
  <span class='kw'>holdout.data</span> <span class='kw'>=</span> <span class='no'>task.hout</span>, <span class='kw'>worst.measure</span> <span class='kw'>=</span> <span class='fl'>100</span>)

<span class='co'># extract param set from objective</span>
<span class='no'>ps.obj</span>  <span class='kw'>&lt;-</span> <span class='fu'><a href='https://mlr.mlr-org.com/reference/getParamSet.html'>getParamSet</a></span>(<span class='no'>fitness.fun.mos</span>)
<span class='fu'>getParamIds</span>(<span class='no'>ps.obj</span>) <span class='co'># automatically added parameter ' for selecting features</span></div><div class='output co'>#&gt; [1] "maxdepth"           "minsplit"           "cp"                
#&gt; [4] "selector.selection"</div><div class='input'>
<span class='no'>exp</span> <span class='kw'>&lt;-</span> <span class='fu'>sampleValue</span>(<span class='no'>ps.obj</span>)
<span class='no'>res</span> <span class='kw'>&lt;-</span> <span class='fu'>fitness.fun.mos</span>(<span class='no'>exp</span>, <span class='kw'>fidelity</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>holdout</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Martin Binder, Susanne Dandl, Julia Moosbauer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


